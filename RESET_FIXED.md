# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª /reset

## –ü—Ä–æ–±–ª–µ–º–∞ (–±—ã–ª–∞)
–ü—Ä–∏ –≤—ã–∑–æ–≤–µ `/reset`:
- ‚ùå session.json –Ω–µ —É–¥–∞–ª—è–ª—Å—è
- ‚ùå –ù–æ–≤–∞—è —Å–µ—Å—Å–∏—è –Ω–µ —Å–æ–∑–¥–∞–≤–∞–ª–∞—Å—å
- ‚ùå –ü—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –¥–µ–ª–∞—Ç—å –≤—Ä—É—á–Ω—É—é –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –±–æ—Ç–∞

## ‚úÖ –†–µ—à–µ–Ω–∏–µ (—Ç–µ–ø–µ—Ä—å)

–î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `reset_session()` –≤ InstagramService, –∫–æ—Ç–æ—Ä—ã–π:
1. **–£–¥–∞–ª—è–µ—Ç session.json**
2. **–ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç Instagram –∫–ª–∏–µ–Ω—Ç**
3. **–í—ã–ø–æ–ª–Ω—è–µ—Ç –Ω–æ–≤—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é**
4. **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é**

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–µ–ø–µ—Ä—å:

```
–í—ã: /reset

–ë–æ—Ç: üîÑ –°–±—Ä–∞—Å—ã–≤–∞—é Instagram —Å–µ—Å—Å–∏—é...
     –®–∞–≥ 1/3: –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–π —Å–µ—Å—Å–∏–∏...
     
     ‚úÖ –®–∞–≥ 1/3: –°—Ç–∞—Ä–∞—è —Å–µ—Å—Å–∏—è —É–¥–∞–ª–µ–Ω–∞
     ‚è≥ –®–∞–≥ 2/3: –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞...
     
     ‚úÖ –®–∞–≥ 1/3: –°—Ç–∞—Ä–∞—è —Å–µ—Å—Å–∏—è —É–¥–∞–ª–µ–Ω–∞
     ‚úÖ –®–∞–≥ 2/3: –ö–ª–∏–µ–Ω—Ç –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω
     ‚è≥ –®–∞–≥ 3/3: –ù–æ–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è...
     
     ‚úÖ Instagram —Å–µ—Å—Å–∏—è —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∞!
     
     ‚úÖ –®–∞–≥ 1/3: –°—Ç–∞—Ä–∞—è —Å–µ—Å—Å–∏—è —É–¥–∞–ª–µ–Ω–∞
     ‚úÖ –®–∞–≥ 2/3: –ö–ª–∏–µ–Ω—Ç –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω
     ‚úÖ –®–∞–≥ 3/3: –ù–æ–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
     
     üì∏ –°—Ç–∞—Ç—É—Å: –ü–æ–¥–∫–ª—é—á–µ–Ω–æ
     üîê –°–µ—Å—Å–∏—è: –°–æ–∑–¥–∞–Ω–∞ –∑–∞–Ω–æ–≤–æ
     üìÅ –§–∞–π–ª: session.json –æ–±–Ω–æ–≤–ª–µ–Ω
     
     –¢–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ—Ç–∞ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏! üéâ
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ù–æ–≤—ã–π –º–µ—Ç–æ–¥ –≤ `InstagramService`

```python
def reset_session(self) -> bool:
    """
    Reset Instagram session completely.
    Deletes session file and reinitializes the client.
    """
    # –®–∞–≥ 1: –£–¥–∞–ª–µ–Ω–∏–µ session.json
    if os.path.exists(self.session_file):
        os.remove(self.session_file)
    
    # –®–∞–≥ 2: –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
    self.client = Client()
    
    # –®–∞–≥ 3: –ù–æ–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
    login_success = self.login()
    
    return login_success
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `handle_reset_instagram`

**–ë—ã–ª–æ:** –í—Ä—É—á–Ω—É—é —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞, –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ  
**–°—Ç–∞–ª–æ:** –í—ã–∑–æ–≤ `instagram_service.reset_session()` —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø—Ä–æ—Ü–µ—Å—Å–∞

---

## üéØ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ—Ü–µ—Å—Å —Å–±—Ä–æ—Å–∞ (–ø–æ—à–∞–≥–æ–≤–æ):

1. **–£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ session.json**
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
   - –£–¥–∞–ª—è–µ—Ç –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
   - –õ–æ–≥–∏—Ä—É–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ

2. **–ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ Instagram –∫–ª–∏–µ–Ω—Ç–∞**
   - –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä `Client()`
   - –û—á–∏—â–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
   - –ì–æ—Ç–æ–≤–∏—Ç—Å—è –∫ –Ω–æ–≤–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

3. **–ù–æ–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**
   - –ü—Ä–æ–±—É–µ—Ç –≤–æ–π—Ç–∏ —á–µ—Ä–µ–∑ sessionid (–µ—Å–ª–∏ –µ—Å—Ç—å)
   - –ü—Ä–æ–±—É–µ—Ç –≤–æ–π—Ç–∏ —á–µ—Ä–µ–∑ session.json (–µ—Å–ª–∏ –µ—Å—Ç—å)
   - –í—ã–ø–æ–ª–Ω—è–µ—Ç —Å–≤–µ–∂–∏–π –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ username/password
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é –≤ session.json

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**
   - –í—ã–∑—ã–≤–∞–µ—Ç `is_logged_in()`
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å —Å–µ—Å—Å–∏–∏
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

---

## üìã –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –∫–æ–¥–µ

### `services/instagram_service.py`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
```python
def reset_session(self) -> bool:
    """Full session reset with file deletion and client recreation"""
    # 1. Delete session.json
    # 2. Recreate client
    # 3. Fresh login
    # 4. Save new session
```

### `handlers/admin_handler.py`

**–û–±–Ω–æ–≤–ª–µ–Ω–æ:**
```python
async def handle_reset_instagram():
    # –ë—ã–ª–æ: –†—É—á–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ, –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ
    # os.remove(session_file)
    # login()
    
    # –°—Ç–∞–ª–æ: –ú–µ—Ç–æ–¥ —Å–µ—Ä–≤–∏—Å–∞
    reset_success = self.instagram_service.reset_session()
```

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ö–æ–º–∞–Ω–¥–∞
```
/reset
```

### –ö–Ω–æ–ø–∫–∞
```
/status ‚Üí [üîÑ Reset Instagram]
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç —É—Å–ø–µ—Ö–∞
```
‚úÖ Instagram —Å–µ—Å—Å–∏—è —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∞!

‚úÖ –®–∞–≥ 1/3: –°—Ç–∞—Ä–∞—è —Å–µ—Å—Å–∏—è —É–¥–∞–ª–µ–Ω–∞
‚úÖ –®–∞–≥ 2/3: –ö–ª–∏–µ–Ω—Ç –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω
‚úÖ –®–∞–≥ 3/3: –ù–æ–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞

üì∏ –°—Ç–∞—Ç—É—Å: –ü–æ–¥–∫–ª—é—á–µ–Ω–æ
üîê –°–µ—Å—Å–∏—è: –°–æ–∑–¥–∞–Ω–∞ –∑–∞–Ω–æ–≤–æ
üìÅ –§–∞–π–ª: session.json –æ–±–Ω–æ–≤–ª–µ–Ω

–¢–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ—Ç–∞ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏! üéâ
```

---

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

### –û—à–∏–±–∫–∞ 1: "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é"

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ù–µ–≤–µ—Ä–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- Instagram —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
- –ê–∫–∫–∞—É–Ω—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env`:
   ```env
   INSTAGRAM_USERNAME=–≤–∞—à_username
   INSTAGRAM_PASSWORD=–≤–∞—à_password
   ```
2. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ SESSIONID:
   ```env
   INSTAGRAM_SESSIONID=–≤–∞—à_sessionid
   ```
3. –í–æ–π–¥–∏—Ç–µ –≤ Instagram –≤—Ä—É—á–Ω—É—é –∏ –ø—Ä–æ–π–¥–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É

### –û—à–∏–±–∫–∞ 2: "–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω, –Ω–æ —Å–µ—Å—Å–∏—è –Ω–µ –≤–∞–ª–∏–¥–Ω–∞"

**–ü—Ä–∏—á–∏–Ω—ã:**
- Instagram —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
- –ê–∫–∫–∞—É–Ω—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
1. –í–æ–π–¥–∏—Ç–µ –≤ Instagram —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
2. –ü—Ä–æ–π–¥–∏—Ç–µ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (SMS, Email)
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ `/reset` —Å–Ω–æ–≤–∞

### –û—à–∏–±–∫–∞ 3: "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–±—Ä–æ—Å–µ —Å–µ—Å—Å–∏–∏"

**–ü—Ä–∏—á–∏–Ω—ã:**
- –§–∞–π–ª session.json –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –¥—Ä—É–≥–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º
- –ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ –∑–∞–ø–∏—Å—å

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é:
   ```bash
   Ctrl+C
   python main.py
   ```
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞–ø–∫–µ `sessions/`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä –±–æ—Ç–∞ –∑–∞–ø—É—â–µ–Ω

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞
```bash
# –î–æ /reset
ls sessions/
# session.json

# –ü–æ—Å–ª–µ /reset
ls sessions/
# session.json (–Ω–æ–≤—ã–π, –¥—Ä—É–≥–∞—è –¥–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è)
```

### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞
```bash
# –ù–æ–≤—ã–π session.json –¥–æ–ª–∂–µ–Ω –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç —Å—Ç–∞—Ä–æ–≥–æ
stat sessions/session.json
```

### –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```
/status
# Instagram: ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–æ
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: –ë—ã–ª–æ ‚Üí –°—Ç–∞–ª–æ

| –ê—Å–ø–µ–∫—Ç | –ë—ã–ª–æ | –°—Ç–∞–ª–æ |
|--------|------|-------|
| –£–¥–∞–ª–µ–Ω–∏–µ session.json | ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–ª–æ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ | ‚ùå –ù–µ –±—ã–ª–æ | ‚úÖ –ï—Å—Ç—å |
| –ù–æ–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é |
| –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ | ‚ùå –ù–µ—Ç | ‚úÖ –ü–æ—à–∞–≥–æ–≤–∞—è |
| –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ | ‚ùå –ë–∞–∑–æ–≤–∞—è | ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è |
| –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç |

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –†–µ–≥—É–ª—è—Ä–Ω—ã–π —Å–±—Ä–æ—Å
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/reset` –ø—Ä–µ–≤–µ–Ω—Ç–∏–≤–Ω–æ:
- –†–∞–∑ –≤ –Ω–µ–¥–µ–ª—é –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
- –ü–æ—Å–ª–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å—Ç–æ—è –±–æ—Ç–∞
- –ü–µ—Ä–µ–¥ –≤–∞–∂–Ω—ã–º–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è–º–∏

### 2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
–°–ª–µ–¥–∏—Ç–µ –∑–∞ —Å—Ç–∞—Ç—É—Å–æ–º:
```
/status  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```

### 3. –õ–æ–≥–∏
–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏:
```
INFO - Resetting Instagram session...
INFO - Deleted session file: sessions/session.json
INFO - Recreating Instagram client...
INFO - Attempting fresh login...
INFO - Instagram session reset successful
```

---

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- ‚úÖ `services/instagram_service.py` - –º–µ—Ç–æ–¥ `reset_session()`
- ‚úÖ `handlers/admin_handler.py` - –æ–±–Ω–æ–≤–ª–µ–Ω `handle_reset_instagram()`
- üìÑ `RESET_FIXED.md` - —ç—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

**–¢–µ–ø–µ—Ä—å `/reset` —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
1. ‚úÖ –£–¥–∞–ª—è–µ—Ç session.json
2. ‚úÖ –ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç
3. ‚úÖ –í—ã–ø–æ–ª–Ω—è–µ—Ç –Ω–æ–≤—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
4. ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞

**–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:**
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ
Ctrl+C

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ
python main.py

# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ
/reset
```

---

**–î–∞—Ç–∞:** 2025-10-21  
**–í–µ—Ä—Å–∏—è:** 1.2.1  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

